{"mappings":"IEII,EACA,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,S,E,S,E,S,E,S,I,E,E,S,E,E,SAFJ,MAAM,EAAkB,SAAS,aAAA,CAAc,0BAG/C,IAAI,EAAO,EAAE,CA0Fb,MAAM,EAAa,IC7FZ,MACC,CAAC,CAAQ,CAAG,+BAAgC,AAC5C,EAAC,CAAO,CAAG,kCAAmC,AAC9C,cAAc,CACV,IAAI,CAAC,IAAA,CAAO,CAChB,CAKA,MAAM,cAAc,CAAC,CAAE,CACnB,IAAM,EAAS,IAAI,gBAAgB,CAC/B,QAAS,IAAI,CAAC,CAAC,CAAO,CACtB,MAAO,EACP,KAAM,IAAI,CAAC,IAAX,AACJ,GACM,EAAW,MAAM,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,GAAA,CAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAQ,CAAC,aAAa,EAAE,EAAO,CAAC,EAC1E,GAAG,CAAC,EAAS,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAQ,MAAM,AAAI,MAAM,4EAClD,OAAO,EAAS,IAAhB,AACJ,CAIA,MAAM,YAAY,CAAE,CAAE,CACtB,IAAM,EAAY,MAAM,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,GAAA,CAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAQ,CAAC,MAAM,EAAE,EAAG,SAAS,EAAE,IAAI,CAAC,CAAC,CAAO,CAAC,CAAC,EACzF,OAAO,EAAS,IAAhB,AACA,CAEA,MAAM,iBAAkB,CAEpB,IAAM,EAAW,MAAM,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,GAAA,CAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAQ,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC,CAAO,CAAC,CAAC,EACrF,EAAa,MAAM,IAAI,CAAC,WAAA,CAAY,EAAS,IAAA,CAAK,OAAO,CAF7C,KAAK,KAAA,CAAM,AAAc,GAAd,KAAK,MAAA,IAEwC,CAAC,EAA3E,GACA,AD3BL,SAA+B,CAAU,EAC5C,IAAM,EAAS,EAAW,MAAA,CAAO,MAAA,CAAO,CAAC,EAAI,IACzC,GAAO,CAAC,EAAE,EAAG,IAAA,CAAK,CAAC,CAAC,CAEtB,IAAI,KAAA,CAAM,KAAK,MAAA,CAAO,AAAA,GAAI,EAC5B,CAAA,EAAO,MAAA,CAAS,EAChB,IAAM,EAAQ,EAAO,IAAA,CAAK,MACpB,EAAS,CAAC;sDACkC,EAAE,EAAW,aAAA,CAAc,OAAO,EAAE,EAAW,cAAA,CAAe;;;;kDAIlE,EAAE,EAAW,cAAA,CAAe;;;;;;;;;;;;6DAYjB,EAAE,EAAW,YAAA,CAAa;mEACpB,EAAE,EAAW,YAAA,CAAa,OAAA,CAAQ,GAAG,oBAAoB,EAAE,EAAW,UAAA,CAAW;6DACvF,EAAE,EAAW,UAAA,CAAW;6DACxB,EAAE,EAAM;;;;;;;gDAOrB,EAAE,EAAW,YAAA,CAAa;;;;yEAID,EAAE,EAAW,UAAA,CAAW;;;;+EAIlB,EAAE,EAAW,YAAA,CAAa,oBAAoB,EAAE,EAAW,UAAA,CAAW;;;;yEAI5E,EAAE,EAAO;;;;;;uBAM3D,EAAE,EAAW,QAAA,CAAS;;;kBAG3B,CAAC,AACP,CAAA,EAAgB,SAAA,CAAY,EAC5B,EAAS,EAAW,EAApB,CACA,EAAQ,SAAS,aAAA,CAAc,kBAC/B,GAAI,CACA,IAAM,EAAM,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,EAAA,GAAE,EAClB,GAAK,CAAA,EAAO,IAAI,EAAI,AAAA,EACpB,EAAK,IAAA,CAAK,AAAA,GAAI,EAAG,EAAA,GAAO,IAAS,CAAA,EAAM,WAAA,CAAc,wBAAxD,EACA,EAAM,gBAAA,CAAiB,QAAS,KAC5B,GAAI,CACA,IAAM,EAAM,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,EAAA,GAAE,EAErB,GADG,GAAK,CAAA,EAAO,IAAI,EAAI,AAAA,EACpB,CAAC,EAAK,IAAA,CAAK,AAAA,GAAI,EAAG,EAAA,GAAO,CAAC,GAAU,CACnC,EAAK,IAAA,CAAK,GACV,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,EAAA,GAAE,CAAG,GACZ,EAAM,WAAA,CAAc,yBACpB,MACJ,CACA,IAAM,EAAO,EAAK,SAAA,CAAU,AAAA,GAAM,EAAG,EAAA,GAAM,OAAO,IAClD,EAAK,MAAA,CAAO,EAAK,GACjB,aAAa,UAAA,CAAW,EAAA,GAAE,EAC1B,AAAA,CAAA,EAAA,EAAA,MAAK,AAAL,EAAO,EAAA,GAAE,CAAG,GACZ,EAAM,WAAA,CAAc,mBACxB,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAA,CAAM,oBAAqB,EAAM,OAAzC,CACJ,CACJ,EACJ,CACA,MAAO,EAAO,CACV,QAAQ,GAAA,CAAI,EAAM,IAAlB,CACR,CACR,EC3DkC,EAC1B,CACR,ED6DA,EAAW,eAAX,G,I,E,E,SEhGA,MAAM,EAAW,SAAS,aAAA,CAAc,iBA2CxC,eAAe,EAAa,CAAK,EAC/B,IAAM,EAAc,MAAM,QAAQ,GAAA,CAAI,EAAM,GAAA,CAAI,MAAO,CAAA,GACrD,CAAE,CAAA,UACF,CAAS,CAAA,YACT,CAAW,CAAA,aACX,CAAY,CAAA,MACZ,CAAK,CAAA,aACL,CAAY,CACb,QAqEc,EAnEb,IAAM,EAAY,MAAM,EAAW,GAC7B,EAoED,AADA,AAnEgB,EAmEX,KAAA,CAAM,IACP,CAAC,EAAE,CAlEZ,MAAO,CAAC,4BAA4B,EAAE,EAAG;;mDAEM,EAAE,EAAY;eAClD,EAAE,EAAM;;;;;qCAKc,EAAE,EAAM;qCACR,EAAE,EAAU,CAAC,EAAE,EAAK;;;sDAGH,EAAG,AAAc,GAAd,EAAiB;;;;;;;;;;;WAW/D,CAAC,AACV,IAEA,OAAO,EAAY,IAAA,CAAK,GAC1B,CACA,eAAe,EAAa,CAAK,EAC/B,IAAM,EAAS,MAAM,EAAa,EAClC,CAAA,EAAS,SAAA,CAAY,CACvB,CAEA,eAAe,IAEb,IAAM,EAAW,MAAM,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,GAAA,CAAI,gDAA8B,CAC7D,QAAS,CACP,OAAQ,mBACR,cAAe,4NACjB,EACA,OAAQ,CACN,SAAU,IACZ,CACF,GAEM,EAAO,EAAS,IAAtB,CACM,EAAS,EAAK,MAApB,CACA,OAAO,CACT,CACA,eAAe,EAAW,CAAM,EAE9B,GAAG,AAAkB,IAAlB,EAAO,MAAA,CACR,MAFiB,YAInB,GAAI,CACF,IAAM,EAAa,MAAM,IACnB,EAAS,EAAU,MAAA,CAAQ,AAAA,GAAO,EAAK,EAAA,GAAO,CAAM,CAAC,EAAE,EAAG,GAAA,CAAI,AAAA,GAAI,EAAG,IAAA,EAAM,IAAA,CAAK,KAEtF,OAAO,CACT,CAAE,MAAO,EAAO,CACd,QAAQ,GAAA,CAAI,EAAM,IAAlB,CACF,CAEF,CAxFA,AAAA,CAAA,EAAA,EAAA,OAAI,AAAJ,EACG,OAAA,CAZa,CACd,OAAQ,MACR,IAAK,mDACL,OAAQ,CAAE,SAAU,OAAQ,EAC5B,QAAS,CACP,OAAQ,mBACR,cACE,4NACJ,CACF,GAIG,IAAA,CAAK,SAAU,CAAQ,EAEtB,EAAa,EAAS,IAAA,CAAK,OAA3B,CAEF,GACC,KAAA,CAAM,SAAU,CAAK,EAEtB","sources":["<anon>","src/js/index.js","src/js/upcoming-this-mounth.js","src/js/tmbd-api.js","src/js/weekly-trends.js"],"sourcesContent":["var $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\nparcelRequire(\"eLjGg\");\nparcelRequire(\"epHO8\");\nparcelRequire(\"bUb57\");\nparcelRequire(\"eEHR3\");\n\nvar $2shzp = parcelRequire(\"2shzp\");\n\nclass $d1442d83e8ed4951$export$348839f8ffd6b300 {\n    #BASE_URL = \"https://api.themoviedb.org/3/\";\n    #API_KEY = \"5e0b2043a7bdefdf129debb784bbe1f7\";\n    constructor(){\n        this.page = 1;\n    }\n    /*\nшлях до картинки\nsrc=\"https://image.tmdb.org/t/p/original/${backdrop_path})\"\n*/ async getFilmByName(q) {\n        const params = new URLSearchParams({\n            api_key: this.#API_KEY,\n            query: q,\n            page: this.page\n        });\n        const response = await (0, $2shzp.default).get(`${this.#BASE_URL}search/movie?${params}`);\n        if (!response.data.results.length) throw new Error(\"OOPS...We are very sorry!We don’t have any results matching your search.\");\n        return response.data;\n    }\n    // getFilmByName return {page: 1, results: Array(20), total_pages: 2, total_results: 31}\n    async getFilmById(id) {\n        const response = await (0, $2shzp.default).get(`${this.#BASE_URL}movie/${id}?api_key=${this.#API_KEY}`);\n        return response.data;\n    }\n    async getUpcomingFilm() {\n        const randomize = Math.floor(Math.random() * 19);\n        const response = await (0, $2shzp.default).get(`${this.#BASE_URL}movie/upcoming?api_key=${this.#API_KEY}`);\n        const randomFilm = await this.getFilmById(response.data.results[randomize].id);\n        (0, $8ad78a0f8772ceff$export$1037361b93d48a1a)(randomFilm);\n    }\n}\n\n\n\nvar $bTcpz = parcelRequire(\"bTcpz\");\nconst $8ad78a0f8772ceff$var$upcomingSection = document.querySelector(\".js-upcoming-container\");\nlet $8ad78a0f8772ceff$var$btnLS;\nlet $8ad78a0f8772ceff$var$filmId;\nlet $8ad78a0f8772ceff$var$toLs = [];\nfunction $8ad78a0f8772ceff$export$1037361b93d48a1a(randomFilm) {\n    const genres = randomFilm.genres.reduce((acc, el)=>{\n        acc += `${el.name} `;\n        return acc;\n    }, \"\").split(\" \").filter((el)=>el);\n    genres.length = 2;\n    const genre = genres.join(\", \");\n    const markup = `<img class=\"upcoming__image\"\n             src=\"https://image.tmdb.org/t/p/original/${randomFilm.backdrop_path}\" alt=\"${randomFilm.original_title}\" \n             loading=\"lazy\"/>\n             <div class=\"desktop__info__wrapper\">\n            <div class=\"upcoming__info-wrapper\">\n                <h3 class=\"upcoming__film__title\">${randomFilm.original_title}</h3>\n                <ul class=\"upcoming__list__rating\">\n                    <li>\n                    <ul class=\"upcoming__item__rating\">\n                        <li>Release date</li>\n                        <li>Vote &#47; Votes</li>\n                        <li>Popularity</li>\n                        <li>Genre</li>\n                    </ul>\n                </li>\n                <li>\n                    <ul class=\"upcoming__item__rating\">\n                        <li class=\"upcoming__item_customize\">${randomFilm.release_date}</li>\n                        <li class=\"upcoming__item_customize\"><span>${randomFilm.vote_average.toFixed(1)}</span> &#47; <span>${randomFilm.vote_count}</span></li>\n                        <li class=\"upcoming__item_customize\">${randomFilm.popularity}</li>\n                        <li class=\"upcoming__item_customize\">${genre}</li>\n                    </ul>\n                </li>\n                </ul>\n                <ul class=\"upcoming__list__tablet\">\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Release date</p>\n                        <p class=\"tablet__info\">${randomFilm.release_date}</p>\n                    </li>\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Popularity</p>\n                        <p class=\"tablet__info upcoming__item_customize\">${randomFilm.popularity}</p>\n                    </li>\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Vote &#47; Votes</p>\n                        <p class=\"tablet__info upcoming__item_customize\"><span>${randomFilm.vote_average}</span> &#47; <span>${randomFilm.vote_count}</span></p>\n                    </li>\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Genre</p>\n                        <p class=\"tablet__info upcoming__item_customize\">${genres}</p>\n                    </li>\n                </ul>\n            </div>\n            <div class=\"upcoming-about-wrapper\">\n                    <p class=\"upcoming__about__title\">About</p>\n                    <p>${randomFilm.overview}</p>\n                </div>\n            <button class=\"upcoming__btn\" type=\"button\">Add to my library</button>\n            </div>`;\n    $8ad78a0f8772ceff$var$upcomingSection.innerHTML = markup;\n    $8ad78a0f8772ceff$var$filmId = randomFilm.id;\n    $8ad78a0f8772ceff$var$btnLS = document.querySelector(\".upcoming__btn\");\n    try {\n        const arr = (0, $bTcpz.loadLs)((0, $bTcpz.KEY));\n        if (arr) $8ad78a0f8772ceff$var$toLs = [\n            ...arr\n        ];\n        if ($8ad78a0f8772ceff$var$toLs.some((el)=>el.id === $8ad78a0f8772ceff$var$filmId)) $8ad78a0f8772ceff$var$btnLS.textContent = \"Remove from my library\";\n        $8ad78a0f8772ceff$var$btnLS.addEventListener(\"click\", ()=>{\n            try {\n                const arr = (0, $bTcpz.loadLs)((0, $bTcpz.KEY));\n                if (arr) $8ad78a0f8772ceff$var$toLs = [\n                    ...arr\n                ];\n                if (!$8ad78a0f8772ceff$var$toLs.some((el)=>el.id === +$8ad78a0f8772ceff$var$filmId)) {\n                    $8ad78a0f8772ceff$var$toLs.push(randomFilm);\n                    (0, $bTcpz.saveLs)((0, $bTcpz.KEY), $8ad78a0f8772ceff$var$toLs);\n                    $8ad78a0f8772ceff$var$btnLS.textContent = \"Remove from my library\";\n                    return;\n                }\n                const ind = $8ad78a0f8772ceff$var$toLs.findIndex((el)=>el.id === Number($8ad78a0f8772ceff$var$filmId)) //удаляю с LS\n                ;\n                $8ad78a0f8772ceff$var$toLs.splice(ind, 1);\n                localStorage.removeItem((0, $bTcpz.KEY));\n                (0, $bTcpz.saveLs)((0, $bTcpz.KEY), $8ad78a0f8772ceff$var$toLs) //добавляю в LS\n                ;\n                $8ad78a0f8772ceff$var$btnLS.textContent = \"Add to my library\";\n            } catch (error) {\n                console.error(\"Set state error: \", error.message);\n            }\n        });\n    } catch (error) {\n        console.log(error.code);\n    }\n}\nconst $8ad78a0f8772ceff$var$searchFilm = new (0, $d1442d83e8ed4951$export$348839f8ffd6b300);\n$8ad78a0f8772ceff$var$searchFilm.getUpcomingFilm();\n\n\n\nvar $2shzp = parcelRequire(\"2shzp\");\nconst $d395fb91404b7f70$var$selectEl = document.querySelector(\".trends__list\");\nconst $d395fb91404b7f70$var$BASE_URL = \"https://api.themoviedb.org/3/\";\n// async function getTrends() {\n//  const response = await axios.get(`${BASE_URL}trending/movie/week`,{\n//     headers: {\n//       accept: 'application/json',\n//       Authorization:\n//         'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA',\n//     },\n//     params: { \n//       language: 'en-US' \n//     },\n//   })\n//   const data = response.data\n//   const results = data.results\n//   console.log(results);\n//   return results;\n// }\nconst $d395fb91404b7f70$var$options = {\n    method: \"GET\",\n    url: \"https://api.themoviedb.org/3/trending/movie/week\",\n    params: {\n        language: \"en-US\"\n    },\n    headers: {\n        accept: \"application/json\",\n        Authorization: \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA\"\n    }\n};\n(0, $2shzp.default).request($d395fb91404b7f70$var$options).then(function(response) {\n    // console.log(response.data.results);\n    $d395fb91404b7f70$var$renderMarkup(response.data.results);\n}).catch(function(error) {\n// console.error(error);\n});\nasync function $d395fb91404b7f70$var$createMarkup(array) {\n    const markupArray = await Promise.all(array.map(async ({ id: id, genre_ids: genre_ids, poster_path: poster_path, release_date: release_date, title: title, vote_average: vote_average })=>{\n        const genreName = await $d395fb91404b7f70$var$cardGenres(genre_ids);\n        const year = $d395fb91404b7f70$var$getYear(release_date);\n        return `<li class=\"trends__item\" id=${id}>\n        <img\n          src=\"https://image.tmdb.org/t/p/original/${poster_path}\"\n          alt=\"${title}\"\n          class=\"trends__photo\"\n        loading=\"lazy\"/>\n        <div class=\"trends__description\">\n          <div class=\"trends__info\">\n            <h3 class=\"trends__name\">${title}</h3>\n            <p class=\"trends__ganre\">${genreName}|${year}</p>\n          </div>\n          <div class=\"raiting__body\">\n            <div class=\"rating__active\" style=\"width: ${vote_average * 10}px\">\n              <div class=\"rating__active__wrapper\">\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>`;\n    }));\n    return markupArray.join(\"\");\n}\nasync function $d395fb91404b7f70$var$renderMarkup(array) {\n    const markup = await $d395fb91404b7f70$var$createMarkup(array);\n    $d395fb91404b7f70$var$selectEl.innerHTML = markup;\n}\n// !======================\nasync function $d395fb91404b7f70$var$loadGenre() {\n    const response = await (0, $2shzp.default).get(`${$d395fb91404b7f70$var$BASE_URL}genre/movie/list`, {\n        headers: {\n            accept: \"application/json\",\n            Authorization: \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA\"\n        },\n        params: {\n            language: \"en\"\n        }\n    });\n    const data = response.data;\n    const genres = data.genres;\n    return genres;\n}\nasync function $d395fb91404b7f70$var$cardGenres(genres) {\n    const defaultGen = \"Nice film\";\n    if (genres.length === 0) return defaultGen;\n    try {\n        const genresApi = await $d395fb91404b7f70$var$loadGenre();\n        const newArr = genresApi.filter((elem)=>elem.id === genres[0]).map((el)=>el.name).join(\" \");\n        return newArr;\n    } catch (error) {\n        console.log(error.code);\n    }\n}\nfunction $d395fb91404b7f70$var$getYear(date) {\n    date = date.split(\"-\");\n    return date[0];\n}\n\n\n\n\n//# sourceMappingURL=index.1bb94488.js.map\n","import './error';\nimport './footer';\nimport './header';\nimport './hero';\nimport './upcoming-this-mounth';\nimport './weekly-trends';","import { TMDBApi } from \"./tmbd-api\";\nimport { KEY, loadLs, saveLs } from \"./modal\";\n\nconst upcomingSection = document.querySelector('.js-upcoming-container');\nlet btnLS;\nlet filmId;\nlet toLs = [];\n\nexport function upcomingSectionMarkup(randomFilm) {\n    const genres = randomFilm.genres.reduce((acc,el)=>{\n        acc += `${el.name} `;\n        return acc\n    },'').split(' ').filter(el=>el);\n    genres.length = 2;\n    const genre = genres.join(', ')\n    const markup = `<img class=\"upcoming__image\"\n             src=\"https://image.tmdb.org/t/p/original/${randomFilm.backdrop_path}\" alt=\"${randomFilm.original_title}\" \n             loading=\"lazy\"/>\n             <div class=\"desktop__info__wrapper\">\n            <div class=\"upcoming__info-wrapper\">\n                <h3 class=\"upcoming__film__title\">${randomFilm.original_title}</h3>\n                <ul class=\"upcoming__list__rating\">\n                    <li>\n                    <ul class=\"upcoming__item__rating\">\n                        <li>Release date</li>\n                        <li>Vote &#47; Votes</li>\n                        <li>Popularity</li>\n                        <li>Genre</li>\n                    </ul>\n                </li>\n                <li>\n                    <ul class=\"upcoming__item__rating\">\n                        <li class=\"upcoming__item_customize\">${randomFilm.release_date}</li>\n                        <li class=\"upcoming__item_customize\"><span>${randomFilm.vote_average.toFixed(1)}</span> &#47; <span>${randomFilm.vote_count}</span></li>\n                        <li class=\"upcoming__item_customize\">${randomFilm.popularity}</li>\n                        <li class=\"upcoming__item_customize\">${genre}</li>\n                    </ul>\n                </li>\n                </ul>\n                <ul class=\"upcoming__list__tablet\">\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Release date</p>\n                        <p class=\"tablet__info\">${randomFilm.release_date}</p>\n                    </li>\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Popularity</p>\n                        <p class=\"tablet__info upcoming__item_customize\">${randomFilm.popularity}</p>\n                    </li>\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Vote &#47; Votes</p>\n                        <p class=\"tablet__info upcoming__item_customize\"><span>${randomFilm.vote_average}</span> &#47; <span>${randomFilm.vote_count}</span></p>\n                    </li>\n                    <li class=\"upcoming__tablet__item\">\n                        <p class=\"tablet__subtitle\">Genre</p>\n                        <p class=\"tablet__info upcoming__item_customize\">${genres}</p>\n                    </li>\n                </ul>\n            </div>\n            <div class=\"upcoming-about-wrapper\">\n                    <p class=\"upcoming__about__title\">About</p>\n                    <p>${randomFilm.overview}</p>\n                </div>\n            <button class=\"upcoming__btn\" type=\"button\">Add to my library</button>\n            </div>`;\n            upcomingSection.innerHTML = markup;\n            filmId = randomFilm.id;\n            btnLS = document.querySelector('.upcoming__btn');\n            try {\n                const arr = loadLs(KEY);\n                if(arr) toLs = [...arr];\n                if(toLs.some(el=>el.id === filmId)) btnLS.textContent = \"Remove from my library\";\n                btnLS.addEventListener('click', ()=> {\n                    try {\n                        const arr = loadLs(KEY);\n                        if(arr) toLs = [...arr]\n                        if(!toLs.some(el=>el.id=== (+filmId))) {\n                            toLs.push(randomFilm);\n                            saveLs(KEY, toLs);\n                            btnLS.textContent = \"Remove from my library\"\n                            return\n                        }\n                        const ind =  toLs.findIndex(el => el.id ===Number(filmId)) //удаляю с LS\n                        toLs.splice(ind, 1);\n                        localStorage.removeItem(KEY);\n                        saveLs(KEY, toLs)                                     //добавляю в LS\n                        btnLS.textContent = \"Add to my library\"\n                    } catch (error) {\n                        console.error(\"Set state error: \", error.message);\n                    }\n                })\n            }\n            catch (error) {\n                console.log(error.code)\n        }\n}\n\nconst searchFilm = new TMDBApi;\n\nsearchFilm.getUpcomingFilm()","import axios from \"axios\";\nimport { upcomingSectionMarkup } from \"./upcoming-this-mounth\";\n\nexport class TMDBApi{\n        #BASE_URL = 'https://api.themoviedb.org/3/';\n        #API_KEY = '5e0b2043a7bdefdf129debb784bbe1f7';\n        constructor() {\n            this.page = 1;\n        }; \n/*\nшлях до картинки\nsrc=\"https://image.tmdb.org/t/p/original/${backdrop_path})\"\n*/\n        async getFilmByName(q) {\n            const params = new URLSearchParams({\n                api_key: this.#API_KEY,\n                query: q,\n                page: this.page,\n            });\n            const response = await axios.get(`${this.#BASE_URL}search/movie?${params}`);\n            if(!response.data.results.length) throw new Error(\"OOPS...We are very sorry!We don’t have any results matching your search.\")\n            return response.data\n        };\n\n        // getFilmByName return {page: 1, results: Array(20), total_pages: 2, total_results: 31}\n\n        async getFilmById(id) {\n        const response  = await axios.get(`${this.#BASE_URL}movie/${id}?api_key=${this.#API_KEY}`);\n        return response.data\n        }\n\n        async getUpcomingFilm() {\n            const randomize = Math.floor(Math.random()*19); \n            const response = await axios.get(`${this.#BASE_URL}movie/upcoming?api_key=${this.#API_KEY}`);\n            const randomFilm = await this.getFilmById(response.data.results[randomize].id);\n            upcomingSectionMarkup(randomFilm)\n        }\n}","import axios from 'axios';\n\nconst selectEl = document.querySelector('.trends__list')\nconst BASE_URL = 'https://api.themoviedb.org/3/'\n\n// async function getTrends() {\n//  const response = await axios.get(`${BASE_URL}trending/movie/week`,{\n//     headers: {\n//       accept: 'application/json',\n//       Authorization:\n//         'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA',\n//     },\n//     params: { \n//       language: 'en-US' \n//     },\n//   })\n//   const data = response.data\n//   const results = data.results\n//   console.log(results);\n//   return results;\n// }\n\nconst options = {\n  method: 'GET',\n  url: 'https://api.themoviedb.org/3/trending/movie/week',\n  params: { language: 'en-US' },\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA',\n  },\n};\n\naxios\n  .request(options)\n  .then(function (response) {\n    // console.log(response.data.results);\n    renderMarkup(response.data.results);\n    \n  })\n  .catch(function (error) {\n    // console.error(error);\n  });\n\n\nasync function createMarkup(array) {\n  const markupArray = await Promise.all(array.map(async ({\n    id,\n    genre_ids,\n    poster_path,\n    release_date,\n    title,\n    vote_average,\n  }) => {\n    \n    const genreName = await cardGenres(genre_ids);\n    const year = getYear(release_date);\n\n    return `<li class=\"trends__item\" id=${id}>\n        <img\n          src=\"https://image.tmdb.org/t/p/original/${poster_path}\"\n          alt=\"${title}\"\n          class=\"trends__photo\"\n        loading=\"lazy\"/>\n        <div class=\"trends__description\">\n          <div class=\"trends__info\">\n            <h3 class=\"trends__name\">${title}</h3>\n            <p class=\"trends__ganre\">${genreName}|${year}</p>\n          </div>\n          <div class=\"raiting__body\">\n            <div class=\"rating__active\" style=\"width: ${(vote_average)*10}px\">\n              <div class=\"rating__active__wrapper\">\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n                <span class=\"rating__active__color\">★</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </li>`;\n  }));\n\n  return markupArray.join('');\n}\nasync function renderMarkup(array) {\n  const markup = await createMarkup(array);\n  selectEl.innerHTML = markup;\n}\n// !======================\nasync function loadGenre() {\n\n  const response = await axios.get(`${BASE_URL}genre/movie/list`,{\n    headers: {\n      accept: 'application/json',\n      Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1ZTBiMjA0M2E3YmRlZmRmMTI5ZGViYjc4NGJiZTFmNyIsInN1YiI6IjY0ZDA5ZWY5ODUwOTBmMDBjODdkY2FjYiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.AoWYcFyuoQyP_ePohi3LRcw4Fp8RAJIbZs-uo4526oA'\n    },\n    params: {\n      language: 'en'\n    }\n  })\n  \n  const data = response.data;\n  const genres = data.genres\n  return genres;\n}\nasync function cardGenres(genres) {\n  const defaultGen = \"Nice film\"\n  if(genres.length === 0){\n    return defaultGen;\n  }\n  try {\n    const genresApi =  await loadGenre()\n    const newArr = genresApi.filter((elem=> elem.id === genres[0])).map(el=>el.name).join(\" \")\n    \n    return newArr;\n  } catch (error) {\n    console.log(error.code);\n  }\n  \n}\nfunction getYear(date) {\n  date = date.split(\"-\");\n  return date[0];\n}\n\n\n\n\n"],"names":["$8ad78a0f8772ceff$var$btnLS","$8ad78a0f8772ceff$var$filmId","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$2shzp","$bTcpz","$8ad78a0f8772ceff$var$upcomingSection","document","querySelector","$8ad78a0f8772ceff$var$toLs","$8ad78a0f8772ceff$var$searchFilm","BASE_URL","API_KEY","constructor","page","getFilmByName","q","params","URLSearchParams","api_key","query","response","default","get","data","results","length","getFilmById","getUpcomingFilm","randomFilm","Math","floor","random","genres","reduce","acc","el","name","split","filter","genre","join","markup","backdrop_path","original_title","release_date","vote_average","toFixed","vote_count","popularity","overview","innerHTML","arr","loadLs","KEY","some","textContent","addEventListener","push","saveLs","ind","findIndex","Number","splice","localStorage","removeItem","error","console","message","log","$d395fb91404b7f70$var$selectEl","$d395fb91404b7f70$var$createMarkup","array","markupArray","Promise","all","map","genre_ids","poster_path","title","date","genreName","$d395fb91404b7f70$var$cardGenres","year","$d395fb91404b7f70$var$renderMarkup","$d395fb91404b7f70$var$loadGenre","headers","accept","Authorization","language","genresApi","newArr","elem","request","method","url","then","catch"],"version":3,"file":"index.1bb94488.js.map"}