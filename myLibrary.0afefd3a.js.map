{"mappings":"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","sources":["<anon>","src/js/myLibrary.js","src/js/library-render.js"],"sourcesContent":["var $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\n\nvar $bTcpz = parcelRequire(\"bTcpz\");\nconst $652f0e6c9547df91$var$refs = {\n    ulEl: document.querySelector(\".trends__list\"),\n    btnLoad: document.querySelector(\".js-load\"),\n    myLibContainer: document.querySelector(\".js-mylib-container\"),\n    searchEl: document.querySelector(\"#genre-search\")\n};\nlet $652f0e6c9547df91$var$genreArr = [];\nlet $652f0e6c9547df91$var$forCheckRender;\nconst $652f0e6c9547df91$var$filmsFromLs = (0, $bTcpz.loadLs)((0, $bTcpz.KEY)) || [];\n$652f0e6c9547df91$var$lengthCheck($652f0e6c9547df91$var$filmsFromLs);\n// проверяем и догружаем все фильмы\nif (!$652f0e6c9547df91$var$filmsFromLs || !$652f0e6c9547df91$var$filmsFromLs.length) $652f0e6c9547df91$var$refs.myLibContainer.innerHTML = `<div class=\"not-found-film-library\">\n    <p class=\"not-found-film-library-text-item\">OOPS...</p>\n    <p class=\"not-found-film-library-text-item\">We are very sorry!</p>\n    <p class=\"not-found-film-library-text-item\">\n      You don’t have any movies at your library.\n    </p>\n    \n    <a class=\"not-found-film-link\" href=\"\"> Search movie </a>\n  </div>\n  <ul class=\"trends__list visually-hidden\"></ul>\n  <button type=\"button\" class=\"load-more js-load visually-hidden\">Load more</button>`;\nelse {\n    $652f0e6c9547df91$var$filmsFromLs.map((el)=>el.genres).map((el)=>el.map((el)=>$652f0e6c9547df91$var$genreArr.push(el.name))); // рендер жанрів в селект\n    $652f0e6c9547df91$var$genreArr = $652f0e6c9547df91$var$genreArr.filter((el, i, arr)=>i === arr.indexOf(el));\n    $652f0e6c9547df91$var$renderOptions($652f0e6c9547df91$var$genreArr);\n    $652f0e6c9547df91$var$refs.searchEl.addEventListener(\"change\", $652f0e6c9547df91$var$onChangeSelect);\n}\nfunction $652f0e6c9547df91$var$renderOptions(arr) {\n    arr.map((el)=>{\n        const option = `<option class='mylib-options'>${el}</option>`;\n        $652f0e6c9547df91$var$refs.searchEl.insertAdjacentHTML(\"beforeend\", option);\n    });\n}\nfunction $652f0e6c9547df91$var$onChangeSelect(e) {\n    $652f0e6c9547df91$var$refs.ulEl.innerHTML = \" \";\n    const genreToFind = e.target.value;\n    if (genreToFind === \"All Genres\") {\n        $652f0e6c9547df91$var$lengthCheck($652f0e6c9547df91$var$filmsFromLs);\n        return;\n    } // перед ретурном запхати функцію рендера(ретурн залишити!!!!!!!!!!!!!)\n    const filterredFilms = $652f0e6c9547df91$var$filmsFromLs.filter((el)=>{\n        return el.genres.some((el)=>el.name.includes(genreToFind));\n    });\n    $652f0e6c9547df91$var$lengthCheck(filterredFilms) // замінити ретурн на функцію рендера\n    ;\n}\nfunction $652f0e6c9547df91$var$lengthCheck(obj) {\n    const filmsInCheckFu = [\n        ...obj\n    ]; // переменная для проверок\n    if (filmsInCheckFu.length < 9) {\n        $652f0e6c9547df91$var$renderMarkup(filmsInCheckFu);\n        $652f0e6c9547df91$var$refs.btnLoad.classList.add(\"visually-hidden\");\n        return;\n    }\n    const toRender = filmsInCheckFu.slice(0, 9); // если больше выводим первые 9\n    filmsInCheckFu.splice(0, 9); // берем все фильмы с 9-го удяляя первые 8\n    $652f0e6c9547df91$var$forCheckRender = [\n        ...filmsInCheckFu\n    ];\n    $652f0e6c9547df91$var$renderMarkup(toRender);\n    $652f0e6c9547df91$var$refs.btnLoad.classList.remove(\"visually-hidden\");\n    $652f0e6c9547df91$var$refs.btnLoad.addEventListener(\"click\", $652f0e6c9547df91$var$onLoadMore);\n}\nfunction $652f0e6c9547df91$var$onLoadMore() {\n    if ($652f0e6c9547df91$var$forCheckRender.length < 9) {\n        $652f0e6c9547df91$var$renderMarkup($652f0e6c9547df91$var$forCheckRender);\n        $652f0e6c9547df91$var$refs.btnLoad.classList.add(\"visually-hidden\");\n        return;\n    }\n    const toRender = $652f0e6c9547df91$var$forCheckRender.slice(0, 9);\n    $652f0e6c9547df91$var$renderMarkup(toRender);\n    $652f0e6c9547df91$var$forCheckRender.splice(0, 9);\n}\nfunction $652f0e6c9547df91$var$renderLibrary(libraryObj) {\n    const markupArray = libraryObj.map(({ id: id, genres: genres, poster_path: poster_path, release_date: release_date, title: title, vote_average: vote_average })=>{\n        return `<li class=\"library-list trends-box\" id=${id}>\n              <img\n                src=\"https://image.tmdb.org/t/p/original/${poster_path}\"\n                alt=\"${title}\"\n                class=\"trends__photo\"\n              />\n              <div class=\"trends__description\">\n                <div class=\"trends__info\">\n                  <h3 class=\"trends__name\">${title}</h3>\n                  <p class=\"trends__ganre\">${genres[0].name}|${$652f0e6c9547df91$var$getYear(release_date)}</p>\n                </div>\n                <div class=\"raiting__body\">\n                  <div class=\"rating__active\" style=\"width: ${vote_average * 10}px\">\n                    <div class=\"rating__active__wrapper\">\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </li>`;\n    }).join(\" \");\n    return markupArray;\n}\nfunction $652f0e6c9547df91$var$renderMarkup(array) {\n    const markup = $652f0e6c9547df91$var$renderLibrary(array);\n    $652f0e6c9547df91$var$refs.ulEl.insertAdjacentHTML(\"beforeend\", markup);\n}\nfunction $652f0e6c9547df91$var$getYear(date) {\n    date = date.split(\"-\");\n    return date[0];\n}\n\n\nparcelRequire(\"epHO8\");\nparcelRequire(\"bUb57\");\nparcelRequire(\"eLjGg\");\nparcelRequire(\"bTcpz\");\nparcelRequire(\"2uOa8\");\n\n\n//# sourceMappingURL=myLibrary.0afefd3a.js.map\n","import './library-render.js';\nimport './footer.js';\nimport './header.js';\nimport './error.js';\nimport './modal.js';\nimport './go-top-btn.js';","import { loadLs, KEY } from \"./modal\";\nimport { KEY } from \"./modal\";\nconst refs = {\n    ulEl : document.querySelector(\".trends__list\"),\n    btnLoad : document.querySelector(\".js-load\"),\n    myLibContainer : document.querySelector('.js-mylib-container'),\n    searchEl : document.querySelector('#genre-search'),\n}\n\n\nlet genreArr = [];\nlet forCheckRender;\n\nconst filmsFromLs = loadLs(KEY) || [];\n\nlengthCheck(filmsFromLs);\n                              // проверяем и догружаем все фильмы\n\nif(!filmsFromLs || !filmsFromLs.length) {               // перевірка локал сторіджа\n    refs.myLibContainer.innerHTML = `<div class=\"not-found-film-library\">\n    <p class=\"not-found-film-library-text-item\">OOPS...</p>\n    <p class=\"not-found-film-library-text-item\">We are very sorry!</p>\n    <p class=\"not-found-film-library-text-item\">\n      You don’t have any movies at your library.\n    </p>\n    \n    <a class=\"not-found-film-link\" href=\"\"> Search movie </a>\n  </div>\n  <ul class=\"trends__list visually-hidden\"></ul>\n  <button type=\"button\" class=\"load-more js-load visually-hidden\">Load more</button>`\n} else {\n    filmsFromLs.map(el=>el.genres).map(el=>el.map(el=>genreArr.push(el.name)));     // рендер жанрів в селект\n    genreArr = genreArr.filter((el,i,arr)=>i===arr.indexOf(el));\n    renderOptions(genreArr);\n    refs.searchEl.addEventListener('change', onChangeSelect);\n}\n\nfunction renderOptions(arr) {\n    arr.map(el=>{\n        const option = `<option class='mylib-options'>${el}</option>`;\n        refs.searchEl.insertAdjacentHTML('beforeend',option)\n    });\n}\n\nfunction onChangeSelect(e) {\n    refs.ulEl.innerHTML = \" \"\n    const genreToFind = e.target.value;\n    if(genreToFind === 'All Genres'){\n      lengthCheck(filmsFromLs);\n      return\n    }                            // перед ретурном запхати функцію рендера(ретурн залишити!!!!!!!!!!!!!)\n     \n    const filterredFilms = filmsFromLs.filter(el=>{\n        return (el.genres.some(el=>el.name.includes(genreToFind)))\n    })\n   lengthCheck(filterredFilms)              // замінити ретурн на функцію рендера\n}\n\nfunction lengthCheck(obj) {\n  const filmsInCheckFu = [...obj];                     // переменная для проверок\n  if(filmsInCheckFu.length < 9){                       // если фильмов < 9 просто выводим\n    renderMarkup(filmsInCheckFu);\n    refs.btnLoad.classList.add(\"visually-hidden\");\n    return\n    } const toRender = filmsInCheckFu.slice(0, 9);      // если больше выводим первые 9\n    filmsInCheckFu.splice(0,9);                         // берем все фильмы с 9-го удяляя первые 8\n    forCheckRender = [...filmsInCheckFu];              \n    renderMarkup(toRender);\n    refs.btnLoad.classList.remove(\"visually-hidden\");\n    refs.btnLoad.addEventListener(\"click\", onLoadMore);\n}\n\nfunction onLoadMore() {                                  // проверяем и отображаем по нажатию кнопки \n    if(forCheckRender.length < 9){\n        renderMarkup(forCheckRender);\n        refs.btnLoad.classList.add(\"visually-hidden\");\n        return\n        } const toRender = forCheckRender.slice(0, 9);\n        renderMarkup(toRender);\n        forCheckRender.splice(0,9);\n\n}\nfunction renderLibrary(libraryObj) {\n\nconst markupArray = libraryObj.map(({id, genres, poster_path, release_date, title, vote_average}) => {\n    return`<li class=\"library-list trends-box\" id=${id}>\n              <img\n                src=\"https://image.tmdb.org/t/p/original/${poster_path}\"\n                alt=\"${title}\"\n                class=\"trends__photo\"\n              />\n              <div class=\"trends__description\">\n                <div class=\"trends__info\">\n                  <h3 class=\"trends__name\">${title}</h3>\n                  <p class=\"trends__ganre\">${genres[0].name}|${getYear(release_date)}</p>\n                </div>\n                <div class=\"raiting__body\">\n                  <div class=\"rating__active\" style=\"width: ${(vote_average)*10}px\">\n                    <div class=\"rating__active__wrapper\">\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                      <span class=\"rating__active__color\">★</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </li>`}).join(\" \")\n        return markupArray;\n      }\nfunction renderMarkup(array) {\n    const markup = renderLibrary(array);\n    refs.ulEl.insertAdjacentHTML(\"beforeend\", markup);\n  }\nfunction getYear(date) {\n    date = date.split(\"-\");\n    return date[0];\n  }\n"],"names":["$652f0e6c9547df91$var$forCheckRender","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$bTcpz","$652f0e6c9547df91$var$refs","ulEl","document","querySelector","btnLoad","myLibContainer","searchEl","$652f0e6c9547df91$var$genreArr","$652f0e6c9547df91$var$filmsFromLs","loadLs","KEY","$652f0e6c9547df91$var$lengthCheck","obj","filmsInCheckFu","length","$652f0e6c9547df91$var$renderMarkup","classList","add","toRender","slice","splice","remove","addEventListener","$652f0e6c9547df91$var$onLoadMore","array","markup","$652f0e6c9547df91$var$renderLibrary","libraryObj","markupArray","map","genres","poster_path","release_date","title","vote_average","date","name","split","join","insertAdjacentHTML","el","push","$652f0e6c9547df91$var$renderOptions","arr","option","filter","i","indexOf","e","innerHTML","genreToFind","target","value","filterredFilms","some","includes"],"version":3,"file":"myLibrary.0afefd3a.js.map"}